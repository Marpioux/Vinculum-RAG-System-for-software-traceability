{
    "ViewPatientOfficeVisitHistoryAction": [
        {
            "parentClass": "ViewPatientOfficeVisitHistoryAction",
            "name": "ViewPatientOfficeVisitHistoryAction",
            "sourceCode": "public ViewPatientOfficeVisitHistoryAction(DAOFactory factory, long loggedInMID) {\r\n\t\tthis.loggedInMID = loggedInMID;\r\n\t\tthis.personnelDAO = factory.getPersonnelDAO();\r\n\t\tthis.transDAO = factory.getTransactionDAO();\r\n\t\tofficevisitDAO = factory.getOfficeVisitDAO();\r\n\t\tthis.patientDAO = factory.getPatientDAO();\r\n\t\t\r\n\t\tvisits = new ArrayList<PatientVisitBean>();\r\n\t\t\r\n\t}"
        },
        {
            "parentClass": "ViewPatientOfficeVisitHistoryAction",
            "name": "processOfficeVisits",
            "sourceCode": "private void processOfficeVisits() throws iTrustException {\r\n\t\ttry {\r\n\t\t\tList<OfficeVisitBean> ovlist = officevisitDAO.getAllOfficeVisitsForLHCP(loggedInMID);\r\n\t\t\tIterator<OfficeVisitBean> it = ovlist.iterator();\r\n\t\t\tOfficeVisitBean ov;\r\n\t\t\tPatientVisitBean visitBean;\r\n\t\t\t\r\n\t\t\twhile (it.hasNext()) {\r\n\t\t\t\tvisitBean = new PatientVisitBean();\r\n\t\t\t\tov = it.next();\r\n\t\t\t\tPatientBean pb;\r\n\t\t\t\tpb = patientDAO.getPatient(ov.getPatientID());\r\n\t\t\t\tvisitBean.setPatient(pb);\r\n\t\t\t\tvisitBean.setPatientName(pb.getFullName());\r\n\t\t\t\tString date = ov.getVisitDateStr();\r\n\t\t\t\tScanner sc = new Scanner(date);\r\n\t\t\t\tsc.useDelimiter(\"/\");\r\n\t\t\t\tString month = sc.next();\r\n\t\t\t\tString day = sc.next();\r\n\t\t\t\tString year = sc.next();\r\n\t\t\t\tvisitBean.setLastOVDateM(month);\r\n\t\t\t\tvisitBean.setLastOVDateD(day);\r\n\t\t\t\tvisitBean.setLastOVDateY(year);\r\n\t\t\t\tvisitBean.setLastOVDate(year +\"-\" + month +\"-\" + date);\r\n\t\t\t\tvisitBean.setAddress1(pb.getStreetAddress1() +\" \" + pb.getStreetAddress2());\r\n\t\t\t\tvisitBean.setAddress2(pb.getCity() + \" \" +pb.getState() +\" \" +pb.getZip());\r\n\t\t\t\tboolean b = PatientInList(pb,date);\r\n\t\t\t\tif(b == false)\r\n\t\t\t\t\tvisits.add(visitBean);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (DBException dbe) {\r\n\t\t\tthrow new iTrustException(dbe.getMessage());\r\n\t\t}\r\n\t}"
        },
        {
            "parentClass": "ViewPatientOfficeVisitHistoryAction",
            "name": "PatientInList",
            "sourceCode": "private boolean PatientInList(PatientBean pb, String date) {\r\n\t\tIterator<PatientVisitBean> it = visits.iterator();\r\n\t\tPatientVisitBean visitBean;\r\n\t\twhile (it.hasNext()){\r\n\t\t\tvisitBean = it.next();\r\n\t\tif(visitBean.getPatientName().equals(pb.getFullName())){\r\n\t\t\t\t\r\n\t\t\t\tif(visitBean.getLastOVDateY().compareTo(date) < 0){\r\n\t\t\t\t\tvisitBean.setLastOVDate(date);\r\n\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t}\t\t\r\n\t\t\r\n\t\treturn false;\r\n\t}"
        },
        {
            "parentClass": "ViewPatientOfficeVisitHistoryAction",
            "name": "getPatients",
            "sourceCode": "public List<PatientVisitBean> getPatients() throws DBException {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tprocessOfficeVisits();\r\n\t\t}\r\n\t\tcatch (iTrustException ie) {\r\n\t\t\t\r\n\t\t}\r\n\t\t//log transaction\r\n\t\ttransDAO.logTransaction(TransactionType.VIEW_PATIENT_LIST,loggedInMID);\r\n\t\t\r\n\t\treturn visits;\r\n\t}"
        },
        {
            "parentClass": "ViewPatientOfficeVisitHistoryAction",
            "name": "getPersonnel",
            "sourceCode": "public PersonnelBean getPersonnel() throws iTrustException {\r\n\t\treturn personnelDAO.getPersonnel(loggedInMID);\r\n\t}"
        }
    ]
}