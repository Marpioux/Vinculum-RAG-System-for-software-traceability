{
    "SurveyDAO": [
        {
            "parentClass": "SurveyDAO",
            "name": "SurveyDAO",
            "sourceCode": "public SurveyDAO(DAOFactory factory) {\r\n\t\tthis.factory = factory;\r\n\t\tthis.surveyLoader = new SurveyLoader();\r\n\t}"
        },
        {
            "parentClass": "SurveyDAO",
            "name": "addCompletedSurvey",
            "sourceCode": "public void addCompletedSurvey(SurveyBean surveyBean, Date date) throws DBException {\r\n\t\tConnection conn = null;\r\n\t\tPreparedStatement ps = null;\r\n\r\n\t\ttry {\r\n\t\t\tconn = factory.getConnection();\r\n\t\t\tps = conn.prepareStatement(\"INSERT INTO OVSurvey (VisitID, SurveyDate) VALUES (?,?)\");\r\n\t\t\tps.setLong(1, surveyBean.getVisitID());\r\n\t\t\tps.setTimestamp(2, new java.sql.Timestamp(date.getTime()));\r\n\t\t\tps.executeUpdate();\r\n\t\t\tif (surveyBean.getWaitingRoomMinutes() > 0) {\r\n\t\t\t\tps = conn.prepareStatement(\"update OVSurvey set WaitingRoomMinutes = ? where VisitID = ?\");\r\n\t\t\t\tps.setFloat(1, surveyBean.getWaitingRoomMinutes());\r\n\t\t\t\tps.setLong(2, surveyBean.getVisitID());\r\n\t\t\t\tps.executeUpdate();\r\n\t\t\t}\r\n\t\t\tif (surveyBean.getExamRoomMinutes() > 0) {\r\n\t\t\t\tps = conn.prepareStatement(\"update OVSurvey set ExamRoomMinutes = ? where VisitID = ?\");\r\n\t\t\t\tps.setFloat(1, surveyBean.getExamRoomMinutes());\r\n\t\t\t\tps.setLong(2, surveyBean.getVisitID());\r\n\t\t\t\tps.executeUpdate();\r\n\t\t\t}\r\n\t\t\tif (surveyBean.getVisitSatisfaction() > 0) {\r\n\t\t\t\tps = conn.prepareStatement(\"update OVSurvey set VisitSatisfaction = ? where VisitID = ?\");\r\n\t\t\t\tps.setFloat(1, surveyBean.getVisitSatisfaction());\r\n\t\t\t\tps.setLong(2, surveyBean.getVisitID());\r\n\t\t\t\tps.executeUpdate();\r\n\t\t\t}\r\n\t\t\tif (surveyBean.getTreatmentSatisfaction() > 0) {\r\n\t\t\t\tps = conn.prepareStatement(\"update OVSurvey set TreatmentSatisfaction = ? where VisitID = ?\");\r\n\t\t\t\tps.setFloat(1, surveyBean.getTreatmentSatisfaction());\r\n\t\t\t\tps.setLong(2, surveyBean.getVisitID());\r\n\t\t\t\tps.executeUpdate();\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new DBException(e);\r\n\t\t} finally {\r\n\t\t\tDBUtil.closeConnection(conn, ps);\r\n\t\t}\r\n\t}"
        },
        {
            "parentClass": "SurveyDAO",
            "name": "getSurveyData",
            "sourceCode": "public SurveyBean getSurveyData(long id) throws DBException {\r\n\r\n\t\tConnection conn = null;\r\n\t\tPreparedStatement ps = null;\r\n\r\n\t\ttry {\r\n\t\t\tconn = factory.getConnection();\r\n\t\t\tps = conn.prepareStatement(\"SELECT * FROM OVSurvey WHERE VisitID = ?\");\r\n\t\t\tps.setLong(1, id);\r\n\t\t\tResultSet rs = ps.executeQuery();\r\n\t\t\trs.next();\r\n\t\t\treturn surveyLoader.loadSingle(rs);\r\n\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new DBException(e);\r\n\t\t} finally {\r\n\t\t\tDBUtil.closeConnection(conn, ps);\r\n\t\t}\r\n\t}"
        },
        {
            "parentClass": "SurveyDAO",
            "name": "isSurveyCompleted",
            "sourceCode": "public boolean isSurveyCompleted(long visitID) throws DBException {\r\n\t\tConnection conn = null;\r\n\t\tPreparedStatement ps = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tconn = factory.getConnection();\r\n\t\t\tps = conn.prepareStatement(\"SELECT count(*) FROM OVSurvey WHERE VisitID = ?\");\r\n\t\t\tps.setLong(1, visitID);\r\n\t\t\tResultSet rs = ps.executeQuery();\r\n\t\t\trs.next();\r\n\t\t\treturn (rs.getInt(1) == 0) ? false : true;\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tthrow new DBException(e);\r\n\t\t} finally {\r\n\t\t\tDBUtil.closeConnection(conn, ps);\r\n\t\t}\r\n\t}"
        }
    ]
}