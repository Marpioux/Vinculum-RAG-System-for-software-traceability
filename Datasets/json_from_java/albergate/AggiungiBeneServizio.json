{
    "AggiungiBeneServizio": [
        {
            "parentClass": "AggiungiBeneServizio",
            "name": "AggiungiBeneServizio",
            "sourceCode": "public AggiungiBeneServizio(Frame parent)\n\t{\n\t\tsuper(\"Creazione di un nuovo bene/servizio/riduzione/supplemento\");\n\t\tpadre = parent;\n\t\tpadre.setEnabled(false);\n\t\tsetupNuovi();\n\t\tinizializza();\n\t\tsetSize(450,600);\n\t\tsetVisible(true);\n\t}"
        },
        {
            "parentClass": "AggiungiBeneServizio",
            "name": "setupNuovi",
            "sourceCode": "void setupNuovi()\n\t{\n\t\t//Creo i pannelli\n\t\tremove(panel[0]);\n\t\tpanel[0] = new Panel();\n\t\tpanel[0].setLayout(grid1);\n\t\tpanel[0].setVisible(false);\n\n\t\t//Creo il pannello in alto\n\t\tlabel = new Label(\"Tipi\");\n\t\tlabel.setFont(ConfigurazioneSistema.font_titolo);\n\t\ttipi = new CheckboxGroup();\n\t\tpanel[0].add(label);\n\t\tpanel[0].add(prima_scelta[0]);\n\t\tpanel[0].add(prima_scelta[1]);\n\t\tpanel[0].add(prima_scelta[2]);\n\t\tpanel[0].add(prima_scelta[3]);\n\t\tpanel[0].add(prima_scelta[4]);\n\t\tpanel[0].setVisible(true);\n\n\t\t//Attacco il pannello in alto al frame\n\t\tthis.setLayout(grid);\n\t\tthis.add(panel[0]);\n\n\t\t//Creo il pannello supplemento\n\t\tpanel[11].setLayout(gridbag);\n\t\tlabel_supp = new Label(\"Ammontare del supplemento \"+(Principale.config).getValuta()+\".\");\n\t\ttf_supp = new TextField(\"\", 10);\n\t\tlabel_stanza_supp = new Label(\"A carico della stanza numero\");\n\t\ttf_stanza_supp = new TextField(\"\", 6);\n\t\tif (padre instanceof MascheraContoRistorazione)\n\t\t\ttf_stanza_supp.setEnabled(false);\n\t\tlabel_mot_supp = new Label(\"Motivazione\");\n\t\ttf_mot_supp = new TextField(\"\", 35);\n\t\tannulla1 = new Button(\"Annulla\");\n\t\tconferma1 = new Button(\"Conferma\");\n\t\tUtils.constrain(panel[11], label_supp, 0, 0, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], tf_supp, 1, 0, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], label_stanza_supp, 0, 1, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], tf_stanza_supp, 1, 1, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], label_mot_supp, 0, 2, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], tf_mot_supp, 1, 2, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[11], annulla1, 1, 3, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.EAST, 0.0, 0.0, 5, 0, 5, 10);\n\t\tUtils.constrain(panel[11], conferma1, 3, 3, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 5, 10, 5, 0);\n\n\t\t//Creo il pannello riduzione\n\t\tpanel[12].setLayout(gridbag);\n\t\tlabel_rid = new Label(\"Ammontare della riduzione \"+(Principale.config).getValuta()+\".\");\n\t\ttf_rid = new TextField(\"\",10);\n\t\tlabel_stanza_rid = new Label(\"A carico della stanza numero\");\n\t\ttf_stanza_rid = new TextField(\"\", 6);\n\t\tif (padre instanceof MascheraContoRistorazione)\n\t\t\ttf_stanza_rid.setEnabled(false);\n\t\tlabel_mot_rid = new Label(\"Motivazione\");\n\t\ttf_mot_rid = new TextField(\"\", 35);\n\t\tannulla2 = new Button(\"Annulla\");\n\t\tconferma2 = new Button(\"Conferma\");\n\t\tUtils.constrain(panel[12], label_rid, 0, 0, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], tf_rid, 1, 0, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], label_stanza_rid, 0, 1, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], tf_stanza_rid, 1, 1, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], label_mot_rid, 0, 2, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 0.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], tf_mot_rid, 1, 2, 4, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 0, 5, 5, 0);\n\t\tUtils.constrain(panel[12], annulla2, 1, 3, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.EAST, 0.0, 0.0, 5, 5, 5, 0);\n\t\tUtils.constrain(panel[12], conferma2, 2, 3, 1, 1,GridBagConstraints.NONE,\n\t\t\t\tGridBagConstraints.WEST, 1.0, 0.0, 5, 5, 5, 0);\n\t}"
        },
        {
            "parentClass": "AggiungiBeneServizio",
            "name": "inizializza",
            "sourceCode": "public void inizializza()\n\t{\n\t\tprima_scelta[3].addItemListener(new ItemListener()\n\t\t{\n\t\t\tpublic void itemStateChanged(ItemEvent e)\n\t\t\t{\n\t\t\t\tif(prima_scelta[3].getState())\n\t\t\t\t{\n\t\t\t\t\tinComuneDE(11, BeneServizio.SUPPLEMENTI);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tprima_scelta[4].addItemListener(new ItemListener()\n\t\t{\n\t\t\tpublic void itemStateChanged(ItemEvent e)\n\t\t\t{\n\t\t\t\tif(prima_scelta[4].getState())\n\t\t\t\t{\n\t\t\t\t\tinComuneDE(12, BeneServizio.RIDUZIONI);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tannulla1.addActionListener(new ActionListener()\n\t\t{\n\t\t\tpublic void actionPerformed(ActionEvent e)\n\t\t\t{\n\t\t\t\tdispose();\n\t\t\t\tpadre.setEnabled(true);\n\t\t\t}\n\t\t});\n\n\t\tannulla2.addActionListener(new ActionListener()\n\t\t{\n\t\t\tpublic void actionPerformed(ActionEvent e)\n\t\t\t{\n\t\t\t\tdispose();\n\t\t\t\tpadre.setEnabled(true);\n\t\t\t}\n\t\t});\n\n\t\tconferma1.addActionListener(new ActionListener()\n\t\t{\n\t\t\tpublic void actionPerformed(ActionEvent e)\n\t\t\t{\n\t\t\t\tscriviSuDB( tf_supp.getText(), tf_stanza_supp.getText(), tf_mot_supp.getText() );\n\t\t\t}           \n\t\t});\n\n\t\tconferma2.addActionListener(new ActionListener()\n\t\t{\n\t\t\tpublic void actionPerformed(ActionEvent e)\n\t\t\t{\n\t\t\t\tscriviSuDB( new String(\"-\"+tf_rid.getText()), tf_stanza_rid.getText(), tf_mot_rid.getText() );\n\t\t\t}\n\t\t});\n\t}"
        },
        {
            "parentClass": "AggiungiBeneServizio",
            "name": "inComuneDE",
            "sourceCode": "void inComuneDE(int numero_pannello, char c)\n\t{\n\t\tlevel = 0;\n\t\tfor(int i=1;i<13;++i)\n\t\t{\n\t\t\tif(panel[i].isVisible())\n\t\t\t\tremove(panel[i]);\n\t\t}\n\t\tthis.add(panel[numero_pannello]);\n\t\tpanel[numero_pannello].setVisible(true);\n\t\tsetVisible(true);\n\t\tcodice = composeCode(level, c);\n\t}"
        },
        {
            "parentClass": "AggiungiBeneServizio",
            "name": "scriviSuDB",
            "sourceCode": "void scriviSuDB(String sup_rid, String stanza, String mot)\n\t{\n\t\tMessageDialog msg;\n\t\t\n\t\tcompleteCode();\n\t\tFloat px = Float.valueOf(sup_rid);\n\t\textra = new BeneServizio((new String(codice)) + tornaCodId((Principale.config).getIdBeneservizio()), \n\t\t\t\t\t\t\tmot, px.floatValue());\n\t\tif (padre instanceof MascheraAddebiti)\n\t\t{\n\t\t\tif ( ((Principale.db).readStanza(stanza) != null) && Utils.isFloatPos(sup_rid) && (mot.length() < 33) )\n\t\t\t{\n\t\t\t\tListaSoggiornanti L_sogg = (Principale.db).foundSoggiornanti(stanza, false);\n\t\t\t\tif (L_sogg != null)\n\t\t\t\t{\n\t\t\t\t\tif (!L_sogg.isEmpty())\n\t\t\t\t\t{\n\t\t\t\t\t\tint j;\n\t\t\t\t\t\tif ((j = (Principale.db).newIdBeneservizio()) == DataBase.OK)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(Principale.config).updateIdBeneservizio();\n\t\t\t\t\t\t\tif ((j = (Principale.db).writeBeneServizio(extra)) == DataBase.OK)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tAddebito da_addebitare = new Addebito(stanza, extra.getCodExtra(), \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  1, px.floatValue());\n\t\t\t\t\t\t\t\tif ((j = (Principale.db).writeAddebito(da_addebitare)) == DataBase.OK)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdispose();\n\t\t\t\t\t\t\t\t\tif ( stanza.equals(((MascheraAddebiti) padre).stanza_prec) )\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t(((MascheraAddebiti) padre).elenco_addebiti).addAddebito(da_addebitare);\n\t\t\t\t\t\t\t\t\t\t(((MascheraAddebiti) padre).elenco_extra_addebitati).addBeneServizio(extra);\n\t\t\t\n\t\t\t\t\t\t                /* travaso delle quantita modificate nel nuovo array per poi \n\t\t\t\t\t\t                   aggiungere il supplemento o riduzione appena inseriti */\n\t\t\t\t    \t\t            int nuove_quantita_mod[] = new int[((MascheraAddebiti) padre).elenco_addebiti.length()];\n\t\t    \t        \t\t    \n\t            \t\t\t\t\t    for (int i = 0; i < ((MascheraAddebiti) padre).quantita_mod.length; i++)\n\t\t\t\t\t\t                \tnuove_quantita_mod[i] = ((MascheraAddebiti) padre).quantita_mod[i];\n\t\t\t\t\t\t                nuove_quantita_mod[nuove_quantita_mod.length-1] = 0;\n\t\t\t\t\t\t                ((MascheraAddebiti) padre).quantita_mod = nuove_quantita_mod;\n\t\t    \t\t\t            \n\t\t\t\t\t\t\t\t\t\t((MascheraAddebiti) padre).continuaAggiornamento();\n\t\t\n\t\t\t\t\t\t\t\t\t\t/* se il numero di stanza era stato cambiato senza addebiti\n\t\t\t\t\t\t\t\t\t\t   allora rimetto il precedente numero di stanza nel textfield\n\t\t\t\t\t\t\t\t\t\t   della finestra Addebiti */\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ( !(((MascheraAddebiti) padre).num_stanza.getText()).equals(((MascheraAddebiti) padre).stanza_prec) )\n\t\t\t\t\t\t\t\t\t\t((MascheraAddebiti) padre).num_stanza.setText( ((MascheraAddebiti) padre).stanza_prec );\n\t\t\t\t\t\t\t\t\tpadre.setEnabled(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tmsg = new MessageDialog(this, \"Errore nell'addebitare: \"+DataBase.strErrore(j));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tmsg = new MessageDialog(this, \"Problemi con il database: \"+DataBase.strErrore(j));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tmsg = new MessageDialog(this, \"Errore nell'aggiornamento: \"+DataBase.strErrore(j));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tmsg = new MessageDialog(this, \" La stanza inserita non e' occupata! \");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tmsg = new MessageDialog(this, \" Problemi con il database! \");\n\t\t\t}\n\t\t\telse\n\t\t\t\tmsg = new MessageDialog(this, \"Errore nei parametri!\");\n\t\t}\n\t\telse\n\t\t{ // si tratta della maschera del conto ristorazione\n\t\t\tdispose();\n\t\t\tAddebito da_addebitare = new Addebito(\"RIST\", extra.getCodExtra(),\n\t\t\t\t\t\t\t\t\t\t\t\t  1, px.floatValue());\n\t\t\t(((MascheraContoRistorazione) padre).elenco_addebiti).addAddebito(da_addebitare);\n\t\t\t(((MascheraContoRistorazione) padre).elenco_extra_addebitati).addBeneServizio(extra);\n\n            /* travaso delle quantita modificate nel nuovo array per poi \n               aggiungere il supplemento o riduzione appena inseriti */\n\n\t\t\tint nuove_quantita_mod[] = new int[((MascheraContoRistorazione) padre).elenco_addebiti.length()];\n\t\t\tfor (int i = 0; i < ((MascheraContoRistorazione) padre).quantita_mod.length; i++)\n\t\t\t\tnuove_quantita_mod[i] = ((MascheraContoRistorazione) padre).quantita_mod[i];\n            nuove_quantita_mod[nuove_quantita_mod.length-1] = 1;\n            ((MascheraContoRistorazione) padre).quantita_mod = nuove_quantita_mod;\n            \n\t\t\t((MascheraContoRistorazione) padre).continuaAggiornamento();\n\t\t\tpadre.setEnabled(true);\n\t\t}\n\t}"
        }
    ]
}